<div class="ajustes-container">
    <div class="content-box">
        <div class="page-header">
            <h1><i class="fas fa-cogs"></i> Ajustes del Sistema</h1>
            <button class="btn btn-primary" id="btn-guardar-ajustes">
                <i class="fas fa-save"></i> Guardar Cambios
            </button>
        </div>

        <!-- Menú de navegación de ajustes -->
        <div class="ajustes-menu">
            <button class="ajuste-menu-item active" data-target="general">
                <i class="fas fa-sliders-h"></i>
                <span>General</span>
            </button>
            <button class="ajuste-menu-item" data-target="restaurante">
                <i class="fas fa-utensils"></i>
                <span>Restaurante</span>
            </button>
            
            
            <button class="ajuste-menu-item" data-target="backup">
                <i class="fas fa-database"></i>
                <span>Backup</span>
            </button>
        </div>

        <!-- Contenido de ajustes -->
        <div class="ajustes-content">
            <!-- Sección General: Catálogos y Roles/Permisos -->
            <div id="seccion-general" class="ajuste-seccion active">
                <h2><i class="fas fa-sliders-h"></i> Catálogos y Seguridad</h2>

                <div class="ajuste-grupo">
                    <h3>Roles</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rol-nombre">Nombre</label>
                            <input id="rol-nombre" class="form-input" placeholder="Nombre del rol">
                        </div>
                        <div class="form-group">
                            <label for="rol-desc">Descripción</label>
                            <input id="rol-desc" class="form-input" placeholder="Descripción (opcional)">
                        </div>
                        <div class="form-group">
                            <button id="btn-rol-guardar" class="btn btn-primary"><i class="fas fa-save"></i> Guardar Rol</button>
                            <input type="hidden" id="rol-id">
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="tabla-roles">
                            <thead>
                                <tr><th>ID</th><th>Nombre</th><th>Descripción</th><th>Acciones</th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <div class="ajuste-grupo">
                    <h3>Permisos por Rol</h3>
                    <div class="form-row" style="gap:12px; align-items:flex-end; flex-wrap:wrap;">
                        <div class="form-group">
                            <label for="rol-select-permisos">Rol</label>
                            <select id="rol-select-permisos" class="form-select"></select>
                        </div>
                        <div class="form-group">
                            <label for="rol-select-copiar">Copiar de</label>
                            <div style="display:flex; gap:8px;">
                                <select id="rol-select-copiar" class="form-select"></select>
                                <button class="btn btn-secondary" id="btn-copiar-permisos" title="Copiar permisos del rol seleccionado"><i class="fas fa-copy"></i></button>
                            </div>
                        </div>
                        <div class="form-group" style="min-width:220px; flex:1;">
                            <label for="filtro-permiso">Filtrar permisos</label>
                            <input id="filtro-permiso" class="form-input" placeholder="Buscar por nombre o clave...">
                        </div>
                        <div class="form-group" style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
                            <button class="btn btn-outline" id="btn-perm-todo" title="Seleccionar todos"><i class="fas fa-check-square"></i></button>
                            <button class="btn btn-outline" id="btn-perm-limpiar" title="Quitar selección"><i class="fas fa-square"></i></button>
                            <button class="btn btn-outline" id="btn-perm-colapsar" title="Colapsar todos"><i class="fas fa-compress"></i></button>
                            <button class="btn btn-outline" id="btn-perm-expandir" title="Expandir todos"><i class="fas fa-expand"></i></button>
                            <span class="badge" id="perm-count" title="Seleccionados">0 seleccionados</span>
                        </div>
                    </div>
                    <div class="permisos-list" id="lista-permisos"></div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="btn-guardar-permisos"><i class="fas fa-check"></i> Guardar Permisos</button>
                    </div>
                </div>

                <div class="ajuste-grupo">
                    <h3>Departamentos</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dep-nombre">Nombre</label>
                            <input id="dep-nombre" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="dep-desc">Descripción</label>
                            <input id="dep-desc" class="form-input">
                        </div>
                        <div class="form-group">
                            <button id="btn-dep-guardar" class="btn btn-primary">Guardar</button>
                            <input type="hidden" id="dep-id">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dep-filtro-activo">Mostrar</label>
                            <select id="dep-filtro-activo" class="form-select">
                                <option value="">Todos</option>
                                <option value="1">Activos</option>
                                <option value="0">Inactivos</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="tabla-dep">
                            <thead><tr><th>ID</th><th>Nombre</th><th>Descripción</th><th>Activo</th><th>Acciones</th></tr></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <div class="ajuste-grupo">
                    <h3>Turnos</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tur-nombre">Nombre</label>
                            <input id="tur-nombre" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="tur-desc">Descripción</label>
                            <input id="tur-desc" class="form-input">
                        </div>
                        <div class="form-group">
                            <button id="btn-tur-guardar" class="btn btn-primary">Guardar</button>
                            <input type="hidden" id="tur-id">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tur-filtro-activo">Mostrar</label>
                            <select id="tur-filtro-activo" class="form-select">
                                <option value="">Todos</option>
                                <option value="1">Activos</option>
                                <option value="0">Inactivos</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="tabla-tur">
                            <thead><tr><th>ID</th><th>Nombre</th><th>Descripción</th><th>Activo</th><th>Acciones</th></tr></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <div class="ajuste-grupo">
                    <h3>Cargos</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="car-nombre">Nombre</label>
                            <input id="car-nombre" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="car-desc">Descripción</label>
                            <input id="car-desc" class="form-input">
                        </div>
                        <div class="form-group">
                            <button id="btn-car-guardar" class="btn btn-primary">Guardar</button>
                            <input type="hidden" id="car-id">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="car-filtro-activo">Mostrar</label>
                            <select id="car-filtro-activo" class="form-select">
                                <option value="">Todos</option>
                                <option value="1">Activos</option>
                                <option value="0">Inactivos</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="tabla-car">
                            <thead><tr><th>ID</th><th>Nombre</th><th>Descripción</th><th>Activo</th><th>Acciones</th></tr></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sección Restaurante -->
            <div id="seccion-restaurante" class="ajuste-seccion">
                <h2><i class="fas fa-utensils"></i> Configuración del Restaurante</h2>
                <p class="section-subtitle">Define la información que también aparecerá en el encabezado de las facturas.</p>

                <div class="restaurante-grid">
                    <div class="rest-col-left">
                        <div class="ajuste-grupo">
                            <h3>Información Básica</h3>
                            <div class="form-group">
                                <label for="nombre-restaurante">Nombre del Restaurante</label>
                                <input type="text" id="nombre-restaurante" class="form-input" value="Mi Restaurante" placeholder="Ej. Cafetería Central">
                                <div class="help-text">Nombre comercial que verán tus clientes.</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="direccion-restaurante">Dirección</label>
                                <textarea id="direccion-restaurante" class="form-textarea" rows="2" placeholder="Calle, número, colonia, ciudad">Av. Principal #123, Ciudad</textarea>
                                <div class="help-text">Se mostrará en el pie del encabezado.</div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="telefono-restaurante">Teléfono</label>
                                    <input type="tel" id="telefono-restaurante" class="form-input" value="+52 555-123-4567" placeholder="+52 555 000 0000">
                                </div>
                                
                                <div class="form-group">
                                    <label for="email-restaurante">Email</label>
                                    <input type="email" id="email-restaurante" class="form-input" value="info@mirestaurante.com" placeholder="contacto@tu-restaurante.com">
                                </div>
                            </div>
                        </div>

                        <div class="ajuste-grupo">
                            <h3>Horarios de Operación</h3>
                            <div class="horarios-container">
                                <div class="horario-item">
                                    <span class="dia-semana">Lunes</span>
                                    <input type="time" class="horario-apertura" value="08:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="22:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="horario-item">
                                    <span class="dia-semana">Martes</span>
                                    <input type="time" class="horario-apertura" value="08:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="22:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="horario-item">
                                    <span class="dia-semana">Miércoles</span>
                                    <input type="time" class="horario-apertura" value="08:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="22:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="horario-item">
                                    <span class="dia-semana">Jueves</span>
                                    <input type="time" class="horario-apertura" value="08:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="22:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="horario-item">
                                    <span class="dia-semana">Viernes</span>
                                    <input type="time" class="horario-apertura" value="08:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="23:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="horario-item">
                                    <span class="dia-semana">Sábado</span>
                                    <input type="time" class="horario-apertura" value="09:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="23:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="horario-item">
                                    <span class="dia-semana">Domingo</span>
                                    <input type="time" class="horario-apertura" value="09:00">
                                    <span class="horario-separador">a</span>
                                    <input type="time" class="horario-cierre" value="20:00">
                                    <label class="switch horario-switch" title="Habilitar día">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="ajuste-grupo">
                            <h3>Configuración de Impuestos</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="iva-porcentaje">IVA (%)</label>
                                    <input type="number" id="iva-porcentaje" class="form-input" value="16" min="0" max="100" step="0.1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="propina-automatica">Propina Automática (%)</label>
                                    <input type="number" id="propina-automatica" class="form-input" value="10" min="0" max="50" step="0.1">
                                </div>
                            </div>
                            
                            <div class="switch-group">
                                <label class="switch">
                                    <input type="checkbox" id="incluir-iva-precios" checked>
                                    <span class="slider"></span>
                                    <span class="switch-label">Incluir IVA en precios mostrados</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="rest-col-right">
                        <div class="ajuste-grupo preview-factura-card">
                            <h3>Vista previa del encabezado de factura</h3>
                            <div class="factura-preview">
                                <div class="factura-logo" aria-hidden="true"><i class="fas fa-store"></i></div>
                                <div class="factura-datos">
                                    <div class="factura-nombre" id="preview-nombre">Mi Restaurante</div>
                                    <div class="factura-line" id="preview-direccion">Av. Principal #123, Ciudad</div>
                                    <div class="factura-line" id="preview-contacto">+52 555-123-4567 · info@mirestaurante.com</div>
                                </div>
                            </div>
                            <div class="muted">Esta cabecera se mostrará en tus facturas.</div>
                        </div>
                    </div>
                </div>
            </div>



            

            <!-- Sección Backup -->
            <div id="seccion-backup" class="ajuste-seccion">
                <h2><i class="fas fa-database"></i> Backup y Restauración</h2>
                
                <div class="ajuste-grupo">
                    <h3>Backup del Sistema</h3>
                    <div class="backup-info">
                        <div class="backup-status">
                            <i class="fas fa-check-circle"></i>
                            <span>Último backup: 15/12/2023 02:00</span>
                        </div>
                        <div class="backup-size">
                            <i class="fas fa-database"></i>
                            <span>Tamaño: 45.2 MB</span>
                        </div>
                    </div>
                    
                    <div class="backup-actions">
                        <button class="btn btn-primary" id="btn-crear-backup">
                            <i class="fas fa-download"></i> Crear Backup Ahora
                        </button>
                        <button class="btn btn-outline" id="btn-programar-backup">
                            <i class="fas fa-history"></i> Programar Backup Automático
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="frecuencia-backup">Frecuencia de Backup Automático</label>
                        <select id="frecuencia-backup" class="form-select">
                            <option value="diario">Diario</option>
                            <option value="semanal">Semanal</option>
                            <option value="mensual">Mensual</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="retencion-backup">Mantener últimos (N) backups</label>
                        <input id="retencion-backup" type="number" min="1" step="1" class="form-input" value="7" />
                    </div>
                </div>

                <div class="ajuste-grupo">
                    <h3>Restauración</h3>
                    <div class="form-group">
                        <label for="archivo-backup">Seleccionar Archivo de Backup</label>
                        <input type="file" id="archivo-backup" class="form-input" accept=".backup,.sql,.sql.gz,.zip,.gz">
                    </div>
                    
                    <div class="restore-actions">
                        <button class="btn btn-warning" id="btn-restaurar-backup">
                            <i class="fas fa-upload"></i> Restaurar Backup
                        </button>
                        <button class="btn btn-danger" id="btn-restaurar-defaults">
                            <i class="fas fa-trash"></i> Restaurar Valores por Defecto
                        </button>
                    </div>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Advertencia:</strong> La restauración sobrescribirá todos los datos actuales.
                    </div>
                </div>

                <div class="ajuste-grupo">
                    <h3>Historial de Backups</h3>
                    <div class="table-container">
                        <table class="data-table" id="tabla-backups">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Tamaño</th>
                                    <th>Tipo</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de confirmación -->
<div id="modal-confirmacion" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Confirmar Cambios</h2>
            <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
            <p>¿Estás seguro de que quieres guardar los cambios realizados en la configuración?</p>
            <div class="modal-actions">
                <button class="btn btn-outline" id="btn-cancelar-cambios">Cancelar</button>
                <button class="btn btn-primary" id="btn-confirmar-cambios">Confirmar</button>
            </div>
        </div>
    </div>
</div>